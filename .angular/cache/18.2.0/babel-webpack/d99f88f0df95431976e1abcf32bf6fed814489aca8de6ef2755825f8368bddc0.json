{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/api.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction AddressComponent_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction AddressComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" Street is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddressComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" City is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddressComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" State is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddressComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" Street is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddressComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" Country is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let AddressComponent = /*#__PURE__*/(() => {\n  class AddressComponent {\n    apiService;\n    fb;\n    router;\n    addressForm;\n    error = null;\n    isEditMode;\n    constructor(apiService, fb, router) {\n      this.apiService = apiService;\n      this.fb = fb;\n      this.router = router;\n      this.isEditMode = this.router.url.includes('edit-address');\n      this.addressForm = this.fb.group({});\n    }\n    ngOnInit() {\n      this.addressForm = this.fb.group({\n        street: ['', Validators.required],\n        city: ['', Validators.required],\n        state: ['', Validators.required],\n        zipCode: ['', Validators.pattern('^[0-9]*$')],\n        country: ['', Validators.required]\n      });\n      if (this.isEditMode) {\n        this.fetchUserAddressInfo();\n      }\n    }\n    fetchUserAddressInfo() {\n      this.apiService.getLoggedInUserInfo().subscribe({\n        next: response => {\n          if (response.user.address) {\n            this.addressForm.patchValue(response.user.address);\n          }\n        },\n        error: error => {\n          console.log(error);\n          this.showError(error?.error?.message || \"unable to get user address\");\n        }\n      });\n    }\n    handleSubmit() {\n      if (this.addressForm.invalid) {\n        this.showError(\"Please fill in all fields\");\n        return;\n      }\n      this.apiService.saveAddress(this.addressForm.value).subscribe({\n        next: response => {\n          this.router.navigate(['/profile']);\n        },\n        error: error => {\n          console.log(error);\n          this.showError(error?.error?.message || \"unable to save user address\");\n        }\n      });\n    }\n    showError(message) {\n      this.error = message;\n      setTimeout(() => {\n        this.error = null;\n      }, 3000);\n    }\n    static ɵfac = function AddressComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AddressComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AddressComponent,\n      selectors: [[\"app-address\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 32,\n      vars: 9,\n      consts: [[1, \"address\"], [\"class\", \"error\", 4, \"ngIf\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [\"for\", \"street\"], [\"id\", \"street\", \"type\", \"text\", \"formControlName\", \"street\", \"required\", \"\"], [\"for\", \"city\"], [\"id\", \"city\", \"type\", \"text\", \"formControlName\", \"city\", \"required\", \"\"], [\"for\", \"state\"], [\"id\", \"state\", \"type\", \"text\", \"formControlName\", \"state\", \"required\", \"\"], [\"for\", \"zipCode\"], [\"id\", \"zipCode\", \"type\", \"number\", \"formControlName\", \"zipCode\", \"required\", \"\"], [\"for\", \"country\"], [\"id\", \"country\", \"type\", \"text\", \"formControlName\", \"country\", \"required\", \"\"], [\"type\", \"submit\", 1, \"btn-submit\"], [1, \"error\"]],\n      template: function AddressComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, AddressComponent_p_3_Template, 2, 1, \"p\", 1);\n          i0.ɵɵelementStart(4, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function AddressComponent_Template_form_ngSubmit_4_listener() {\n            return ctx.handleSubmit();\n          });\n          i0.ɵɵelementStart(5, \"div\", 3)(6, \"label\", 4);\n          i0.ɵɵtext(7, \"Street: \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(8, \"input\", 5);\n          i0.ɵɵtemplate(9, AddressComponent_div_9_Template, 2, 0, \"div\", 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 3)(11, \"label\", 6);\n          i0.ɵɵtext(12, \"City: \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"input\", 7);\n          i0.ɵɵtemplate(14, AddressComponent_div_14_Template, 2, 0, \"div\", 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\", 3)(16, \"label\", 8);\n          i0.ɵɵtext(17, \"State: \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"input\", 9);\n          i0.ɵɵtemplate(19, AddressComponent_div_19_Template, 2, 0, \"div\", 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 3)(21, \"label\", 10);\n          i0.ɵɵtext(22, \"Zip Code: \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(23, \"input\", 11);\n          i0.ɵɵtemplate(24, AddressComponent_div_24_Template, 2, 0, \"div\", 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"div\", 3)(26, \"label\", 12);\n          i0.ɵɵtext(27, \"Country: \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(28, \"input\", 13);\n          i0.ɵɵtemplate(29, AddressComponent_div_29_Template, 2, 0, \"div\", 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"button\", 14);\n          i0.ɵɵtext(31);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          let tmp_3_0;\n          let tmp_4_0;\n          let tmp_5_0;\n          let tmp_6_0;\n          let tmp_7_0;\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.isEditMode ? \"Edit Addreess\" : \"Add Address\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.addressForm);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.addressForm.get(\"street\")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx.addressForm.get(\"street\")) == null ? null : tmp_3_0.touched));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.addressForm.get(\"city\")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx.addressForm.get(\"city\")) == null ? null : tmp_4_0.touched));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.addressForm.get(\"state\")) == null ? null : tmp_5_0.invalid) && ((tmp_5_0 = ctx.addressForm.get(\"state\")) == null ? null : tmp_5_0.touched));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx.addressForm.get(\"zipCode\")) == null ? null : tmp_6_0.invalid) && ((tmp_6_0 = ctx.addressForm.get(\"zipCode\")) == null ? null : tmp_6_0.touched));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx.addressForm.get(\"country\")) == null ? null : tmp_7_0.invalid) && ((tmp_7_0 = ctx.addressForm.get(\"country\")) == null ? null : tmp_7_0.touched));\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.isEditMode ? \"Update Addreess\" : \"Save Address\");\n        }\n      },\n      dependencies: [ReactiveFormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.FormGroupDirective, i2.FormControlName, CommonModule, i4.NgIf],\n      styles: [\".address[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;border-radius:8px;margin-bottom:8rem}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px;color:#555}input[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box;border-radius:4px}input[_ngcontent-%COMP%]:focus{border-color:#f68b1e;outline:none}.error[_ngcontent-%COMP%]{color:red;font-size:.9remx;text-align:center;margin-bottom:15px}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#f68b1e;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#f68b1e}\"]\n    });\n  }\n  return AddressComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}