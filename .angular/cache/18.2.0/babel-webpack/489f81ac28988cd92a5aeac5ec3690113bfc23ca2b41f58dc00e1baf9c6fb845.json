{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { PaginationComponent } from '../pagination/pagination.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction ProfileComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 8);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction ProfileComponent_ng_template_5_div_0_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\")(2, \"strong\");\n    i0.ɵɵtext(3, \"Street: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\")(6, \"strong\");\n    i0.ɵɵtext(7, \"City: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\")(10, \"strong\");\n    i0.ɵɵtext(11, \"State: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\")(14, \"strong\");\n    i0.ɵɵtext(15, \"Zip Code: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\")(18, \"strong\");\n    i0.ɵɵtext(19, \"Country: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.userInfo.address.street);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.userInfo.address.city);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.userInfo.address.state);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.userInfo.address.zipCode);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.userInfo.address.country);\n  }\n}\nfunction ProfileComponent_ng_template_5_div_0_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"No Address Available\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_template_5_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\")(2, \"strong\");\n    i0.ɵɵtext(3, \"Name: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\")(6, \"strong\");\n    i0.ɵɵtext(7, \"Email: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\")(10, \"strong\");\n    i0.ɵɵtext(11, \"PhoneNumber: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\")(14, \"h3\");\n    i0.ɵɵtext(15, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, ProfileComponent_ng_template_5_div_0_div_16_Template, 21, 5, \"div\", 4)(17, ProfileComponent_ng_template_5_div_0_ng_template_17_Template, 2, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(19, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_template_5_div_0_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.handleAddressClick());\n    });\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const noAddress_r4 = i0.ɵɵreference(18);\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.userInfo.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.userInfo.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.userInfo.phoneNumber);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userInfo.address)(\"ngIfElse\", noAddress_r4);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.userInfo.address ? \"Edit Address\" : \"Add Address\", \" \");\n  }\n}\nfunction ProfileComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ProfileComponent_ng_template_5_div_0_Template, 21, 6, \"div\", 9);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userInfo);\n  }\n}\nfunction ProfileComponent_li_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementStart(2, \"div\")(3, \"p\")(4, \"strong\");\n    i0.ɵɵtext(5, \"Name: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\")(8, \"strong\");\n    i0.ɵɵtext(9, \"Status: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n    i0.ɵɵtext(13, \"Quantity: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\")(16, \"strong\");\n    i0.ɵɵtext(17, \"Price: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const order_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", order_r5.product == null ? null : order_r5.product.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", order_r5.product == null ? null : order_r5.product.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(order_r5.product == null ? null : order_r5.product.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(order_r5.status);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(order_r5.quantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(order_r5.price);\n  }\n}\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  class ProfileComponent {\n    apiService;\n    router;\n    constructor(apiService, router) {\n      this.apiService = apiService;\n      this.router = router;\n    }\n    userInfo = null;\n    error = null;\n    currentPage = 1;\n    itemsPerPage = 5;\n    ngOnInit() {\n      this.fetchUserInfo();\n    }\n    fetchUserInfo() {\n      this.apiService.getLoggedInUserInfo().subscribe({\n        next: response => {\n          this.userInfo = response.user;\n        },\n        error: error => {\n          console.log(error);\n          this.error = error?.error?.message || \"Unable to fetch user information\";\n        }\n      });\n    }\n    handleAddressClick() {\n      const urlPathToNavigateTo = this.userInfo?.address ? '/edit-address' : '/add-address';\n      this.router.navigate([urlPathToNavigateTo]);\n    }\n    onPageChange(page) {\n      this.currentPage = page;\n    }\n    get paginatedOrders() {\n      if (!this.userInfo?.orderItemList) return [];\n      return this.userInfo.orderItemList.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);\n    }\n    get totalPages() {\n      return Math.ceil((this.userInfo?.orderItemList?.length || 0) / this.itemsPerPage);\n    }\n    static ɵfac = function ProfileComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ProfileComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProfileComponent,\n      selectors: [[\"app-profile\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 13,\n      vars: 6,\n      consts: [[\"profileContent\", \"\"], [\"noAddress\", \"\"], [1, \"profile-container\"], [1, \"account-section\"], [4, \"ngIf\", \"ngIfElse\"], [1, \"history-section\"], [4, \"ngFor\", \"ngForOf\"], [3, \"pageChange\", \"currentPage\", \"totalPages\"], [1, \"error\"], [4, \"ngIf\"], [1, \"profile-button\", 3, \"click\"], [3, \"src\", \"alt\"]],\n      template: function ProfileComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"h2\");\n          i0.ɵɵtext(3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, ProfileComponent_ng_container_4_Template, 3, 1, \"ng-container\", 4)(5, ProfileComponent_ng_template_5_Template, 1, 1, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"h3\");\n          i0.ɵɵtext(9, \"Order History\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"ul\");\n          i0.ɵɵtemplate(11, ProfileComponent_li_11_Template, 19, 6, \"li\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"app-pagination\", 7);\n          i0.ɵɵlistener(\"pageChange\", function ProfileComponent_Template_app_pagination_pageChange_12_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onPageChange($event));\n          });\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          const profileContent_r6 = i0.ɵɵreference(6);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\"Welcome \", ctx.userInfo == null ? null : ctx.userInfo.name, \"\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.error)(\"ngIfElse\", profileContent_r6);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.paginatedOrders);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"currentPage\", ctx.currentPage)(\"totalPages\", ctx.totalPages);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, PaginationComponent],\n      styles: [\"*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.profile-container[_ngcontent-%COMP%]{margin-top:60px;display:flex;justify-content:space-between;align-items:flex-start;gap:20px;padding:20px;max-width:1200px;margin-bottom:9rem}.account-section[_ngcontent-%COMP%], .history-section[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;padding:20px;border-radius:5px;background-color:#fff;box-shadow:2px 2px 4px 4px #0000001a}.account-section[_ngcontent-%COMP%]{margin-top:5px;margin-right:10px}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-top:5px;font-size:24px;margin-bottom:20px}.error[_ngcontent-%COMP%]{color:red;font-weight:700}.profile-button[_ngcontent-%COMP%]{background-color:#f68b1e;color:#fff;border:none;padding:10px 15px;font-size:16px;cursor:pointer;border-radius:5px}.profile-button[_ngcontent-%COMP%]:hover{background-color:#c79868}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;align-items:center;border-bottom:1px solid #ddd;padding-bottom:10px}li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;margin-right:10px}li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}\"]\n    });\n  }\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}