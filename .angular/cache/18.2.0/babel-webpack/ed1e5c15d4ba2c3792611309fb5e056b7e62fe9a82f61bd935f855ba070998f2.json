{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { PaginationComponent } from '../../pagination/pagination.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction AdminorderComponent_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction AdminorderComponent_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const status_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", status_r2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(status_r2);\n  }\n}\nfunction AdminorderComponent_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const status_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", status_r3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(status_r3);\n  }\n}\nfunction AdminorderComponent_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\")(13, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function AdminorderComponent_tr_35_Template_button_click_13_listener() {\n      const order_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.navigateToOrderDetailsPage(order_r5.id));\n    });\n    i0.ɵɵtext(14, \"Details\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const order_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r5.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r5.user.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r5.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r5.price.toFixed(2));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(11, 5, order_r5.createdAt, \"dd/MM/yyyy\"));\n  }\n}\nexport let AdminorderComponent = /*#__PURE__*/(() => {\n  class AdminorderComponent {\n    apiService;\n    router;\n    orders = [];\n    filterOrders = [];\n    statusFilter = '';\n    searchStatus = '';\n    currentPage = 1;\n    totalPages = 1;\n    itemsPerPage = 10;\n    error = null;\n    OderStatus = [\"PENDING\", \"CONFIRMED\", \"SHIPPED\", \"DELIVERED\", \"CANCELLED\", \"RETURNED\"];\n    constructor(apiService, router) {\n      this.apiService = apiService;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.fetchOrders();\n    }\n    fetchOrders() {\n      const ordersObservable = this.searchStatus ? this.apiService.getAllOrderItemsByStatus(this.searchStatus) : this.apiService.getAllOrders();\n      ordersObservable.subscribe({\n        next: res => {\n          this.setOrders(res.orderItemList || []);\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    }\n    setOrders(orderList) {\n      this.orders = orderList;\n      this.totalPages = Math.ceil(orderList.length / this.itemsPerPage);\n      this.filterOrders = orderList.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);\n    }\n    handleFilterChange() {\n      this.currentPage = 1;\n      if (this.statusFilter) {\n        const filtered = this.orders.filter(order => order.status == this.statusFilter);\n        this.filterOrders = filtered.slice(0, this.itemsPerPage);\n        this.totalPages = Math.ceil(filtered.length / this.itemsPerPage);\n      } else {\n        this.filterOrders = this.orders.slice(0, this.itemsPerPage);\n        this.totalPages = Math.ceil(this.orders.length / this.itemsPerPage);\n      }\n    }\n    handleSearchStatusChanged() {\n      this.currentPage = 1;\n      this.fetchOrders();\n    }\n    onPageChange(page) {\n      this.currentPage = page;\n      this.filterOrders = this.orders.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);\n    }\n    navigateToOrderDetailsPage(id) {\n      this.router.navigate([`/admin/order-details/${id}`]);\n    }\n    static ɵfac = function AdminorderComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AdminorderComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminorderComponent,\n      selectors: [[\"app-adminorder\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 37,\n      vars: 8,\n      consts: [[1, \"container\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"filter-container\"], [3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"pageChange\", \"currentPage\", \"totalPages\"], [1, \"error\"], [3, \"value\"], [3, \"click\"]],\n      template: function AdminorderComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Orders\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, AdminorderComponent_p_3_Template, 2, 1, \"p\", 1);\n          i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\")(6, \"label\");\n          i0.ɵɵtext(7, \"Filter By Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"select\", 3);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminorderComponent_Template_select_ngModelChange_8_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.statusFilter, $event) || (ctx.statusFilter = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"change\", function AdminorderComponent_Template_select_change_8_listener() {\n            return ctx.handleFilterChange();\n          });\n          i0.ɵɵelementStart(9, \"option\", 4);\n          i0.ɵɵtext(10, \"All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(11, AdminorderComponent_option_11_Template, 2, 2, \"option\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\")(13, \"label\");\n          i0.ɵɵtext(14, \" Seaarch By Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"select\", 3);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminorderComponent_Template_select_ngModelChange_15_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.searchStatus, $event) || (ctx.searchStatus = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"change\", function AdminorderComponent_Template_select_change_15_listener() {\n            return ctx.handleSearchStatusChanged();\n          });\n          i0.ɵɵelementStart(16, \"option\", 4);\n          i0.ɵɵtext(17, \"All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(18, AdminorderComponent_option_18_Template, 2, 2, \"option\", 5);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(19, \"table\")(20, \"thead\")(21, \"tr\")(22, \"th\");\n          i0.ɵɵtext(23, \"Order Id\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"th\");\n          i0.ɵɵtext(25, \"Customer\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"th\");\n          i0.ɵɵtext(27, \"Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"th\");\n          i0.ɵɵtext(29, \"Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"th\");\n          i0.ɵɵtext(31, \"Date Ordered\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"th\");\n          i0.ɵɵtext(33, \"Actions\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(34, \"tbody\");\n          i0.ɵɵtemplate(35, AdminorderComponent_tr_35_Template, 15, 8, \"tr\", 6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(36, \"app-pagination\", 7);\n          i0.ɵɵlistener(\"pageChange\", function AdminorderComponent_Template_app_pagination_pageChange_36_listener($event) {\n            return ctx.onPageChange($event);\n          });\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.statusFilter);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.OderStatus);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchStatus);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.OderStatus);\n          i0.ɵɵadvance(17);\n          i0.ɵɵproperty(\"ngForOf\", ctx.filterOrders);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"currentPage\", ctx.currentPage)(\"totalPages\", ctx.totalPages);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, i3.DatePipe, FormsModule, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel, ReactiveFormsModule, PaginationComponent],\n      styles: [\".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;margin-bottom:8rem}h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px;text-align:center}.error[_ngcontent-%COMP%]{color:red;text-align:center;margin-bottom:20px}.filter-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}label[_ngcontent-%COMP%]{margin-right:10px;font-weight:700}select[_ngcontent-%COMP%]{padding:8px;font-size:16px;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 15px;border:1px solid #ddd;text-align:center}th[_ngcontent-%COMP%]{background-color:#f4f4f4;font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}button[_ngcontent-%COMP%]{padding:10px 15px;font-size:14px;border:none;border-radius:4px;background-color:#f68b1e;color:#fff;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#d09356}\"]\n    });\n  }\n  return AdminorderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}